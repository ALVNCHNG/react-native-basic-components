var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=exports.BaseFormDateTime=exports.propTypes=exports.DateTimeBaseInputDefaultProps=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var React=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _reactNative=require("react-native");var _datetimepicker=_interopRequireDefault(require("@react-native-community/datetimepicker"));var _moment=_interopRequireDefault(require("moment"));var _FormInputContainer=_interopRequireDefault(require("./FormInputContainer"));var _themes=require("./themes");var _utils=require("./utils");var _this=this,_jsxFileName="C:\\Users\\alvin\\Downloads\\Repositories\\react-native-basic-components\\src\\FormDateTime.tsx";var DefaultDateFormat="MMM DD, YYYY";var DefaultDateTimeFormat="MMM DD, YYYY hh:mm A";var DateTimeBaseInputDefaultProps={allowDefaultStyle:true,placeholder:"Select date"};exports.DateTimeBaseInputDefaultProps=DateTimeBaseInputDefaultProps;var propTypes={displayFormat:_propTypes["default"].string,value:_propTypes["default"].instanceOf(Date),onChange:_propTypes["default"].func,onInputPress:_propTypes["default"].func};exports.propTypes=propTypes;var BaseFormDateTime=function BaseFormDateTime(_ref){var placeholder=_ref.placeholder,value=_ref.value,invalid=_ref.invalid,allowDefaultStyle=_ref.allowDefaultStyle,displayFormat=_ref.displayFormat,mode=_ref.mode,style=_ref.style,filledStyle=_ref.filledStyle,invalidStyle=_ref.invalidStyle,onChange=_ref.onChange,onInputPress=_ref.onInputPress,display=_ref.display,otherProps=(0,_objectWithoutProperties2["default"])(_ref,["placeholder","value","invalid","allowDefaultStyle","displayFormat","mode","style","filledStyle","invalidStyle","onChange","onInputPress","display"]);var _React$useState=React.useState(false),_React$useState2=(0,_slicedToArray2["default"])(_React$useState,2),visible=_React$useState2[0],setVisible=_React$useState2[1];var valueFormat=React.useMemo(function(){if(!!displayFormat){return displayFormat;}return mode==="date"?DefaultDateFormat:DefaultDateTimeFormat;},[displayFormat,mode]);var compileStyle=React.useMemo(function(){return(0,_utils.compileTextStyles)(_themes.ThemeFormDateTime.style,style,allowDefaultStyle);},[allowDefaultStyle,style,_themes.ThemeFormDateTime.style]);var compiledFilledStyle=React.useMemo(function(){if(!value){return null;}return(0,_utils.compileTextStyles)(_themes.ThemeFormDateTime.filledStyle,filledStyle,allowDefaultStyle);},[allowDefaultStyle,value,filledStyle,_themes.ThemeFormDateTime.filledStyle]);var compiledInvalidStyle=React.useMemo(function(){if(!invalid){return null;}return(0,_utils.compileTextStyles)(_themes.ThemeFormDateTime.invalidStyle,invalidStyle,allowDefaultStyle);},[allowDefaultStyle,invalid,invalidStyle,_themes.ThemeFormDateTime.invalidStyle]);var handleChange=function handleChange(_,selectedDate){var currentDate=selectedDate||value;setVisible(_reactNative.Platform.OS==="ios");return onChange&&onChange(currentDate);};var handlePress=function handlePress(event){setVisible(true);onInputPress&&onInputPress(event);};var compiledStyles=_reactNative.StyleSheet.flatten([compileStyle,compiledFilledStyle,compiledInvalidStyle]);return React.createElement(React.Fragment,null,React.createElement(_reactNative.TouchableOpacity,{onPress:handlePress,__self:_this,__source:{fileName:_jsxFileName,lineNumber:160,columnNumber:7}},React.createElement(_reactNative.Text,{style:compiledStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:161,columnNumber:9}},!!value?(0,_moment["default"])(value).format(valueFormat):placeholder)),visible&&React.createElement(_datetimepicker["default"],(0,_extends2["default"])({},otherProps,{display:display,value:value||new Date(),onChange:handleChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:166,columnNumber:9}})));};exports.BaseFormDateTime=BaseFormDateTime;BaseFormDateTime.displayName=_utils.DisplayNamePrefix+"BaseFormDateTime";BaseFormDateTime.propTypes=propTypes;var FormDateTime=function FormDateTime(_ref2){var leftComponent=_ref2.leftComponent,rightComponent=_ref2.rightComponent,containerStyle=_ref2.containerStyle,filledContainerStyle=_ref2.filledContainerStyle,focusedContainerStyle=_ref2.focusedContainerStyle,invalidContainerStyle=_ref2.invalidContainerStyle,inputProps=(0,_objectWithoutProperties2["default"])(_ref2,["leftComponent","rightComponent","containerStyle","filledContainerStyle","focusedContainerStyle","invalidContainerStyle"]);return React.createElement(_FormInputContainer["default"],{filled:!!inputProps.value,invalid:!!inputProps.invalid,allowDefaultStyle:inputProps.allowDefaultStyle,style:containerStyle,filledStyle:filledContainerStyle,focusedStyle:focusedContainerStyle,invalidStyle:invalidContainerStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:192,columnNumber:5}},React.createElement(BaseFormDateTime,(0,_extends2["default"])({},inputProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:201,columnNumber:7}})));};var _default=FormDateTime;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Gb3JtRGF0ZVRpbWUudHN4Il0sIm5hbWVzIjpbIkRlZmF1bHREYXRlRm9ybWF0IiwiRGVmYXVsdERhdGVUaW1lRm9ybWF0IiwiRGF0ZVRpbWVCYXNlSW5wdXREZWZhdWx0UHJvcHMiLCJhbGxvd0RlZmF1bHRTdHlsZSIsInBsYWNlaG9sZGVyIiwicHJvcFR5cGVzIiwiZGlzcGxheUZvcm1hdCIsIlByb3BUeXBlcyIsInN0cmluZyIsInZhbHVlIiwiaW5zdGFuY2VPZiIsIkRhdGUiLCJvbkNoYW5nZSIsImZ1bmMiLCJvbklucHV0UHJlc3MiLCJCYXNlRm9ybURhdGVUaW1lIiwiaW52YWxpZCIsIm1vZGUiLCJzdHlsZSIsImZpbGxlZFN0eWxlIiwiaW52YWxpZFN0eWxlIiwiZGlzcGxheSIsIm90aGVyUHJvcHMiLCJSZWFjdCIsInVzZVN0YXRlIiwidmlzaWJsZSIsInNldFZpc2libGUiLCJ2YWx1ZUZvcm1hdCIsInVzZU1lbW8iLCJjb21waWxlU3R5bGUiLCJUaGVtZUZvcm1EYXRlVGltZSIsImNvbXBpbGVkRmlsbGVkU3R5bGUiLCJjb21waWxlZEludmFsaWRTdHlsZSIsImhhbmRsZUNoYW5nZSIsIl8iLCJzZWxlY3RlZERhdGUiLCJjdXJyZW50RGF0ZSIsIlBsYXRmb3JtIiwiT1MiLCJoYW5kbGVQcmVzcyIsImV2ZW50IiwiY29tcGlsZWRTdHlsZXMiLCJTdHlsZVNoZWV0IiwiZmxhdHRlbiIsImZvcm1hdCIsImRpc3BsYXlOYW1lIiwiRGlzcGxheU5hbWVQcmVmaXgiLCJGb3JtRGF0ZVRpbWUiLCJsZWZ0Q29tcG9uZW50IiwicmlnaHRDb21wb25lbnQiLCJjb250YWluZXJTdHlsZSIsImZpbGxlZENvbnRhaW5lclN0eWxlIiwiZm9jdXNlZENvbnRhaW5lclN0eWxlIiwiaW52YWxpZENvbnRhaW5lclN0eWxlIiwiaW5wdXRQcm9wcyJdLCJtYXBwaW5ncyI6IndtQkFBQSxvREFDQSw2REFDQSx5Q0FRQSw4RkFHQSxzREFFQSxnRkFDQSxnQ0FP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cUJBR0ksT0FISkEscUJBR0ksQ0FGSkMscUJBRUksT0FGSkEscUJBRUksQ0FEREMsVUFDQyw0S0FDSixNQUNFLHFCQUFDLDhCQUFELEVBQ0UsTUFBTSxDQUFFLENBQUMsQ0FBQ0EsVUFBVSxDQUFDN0MsS0FEdkIsQ0FFRSxPQUFPLENBQUUsQ0FBQyxDQUFDNkMsVUFBVSxDQUFDdEMsT0FGeEIsQ0FHRSxpQkFBaUIsQ0FBRXNDLFVBQVUsQ0FBQ25ELGlCQUhoQyxDQUlFLEtBQUssQ0FBRStDLGNBSlQsQ0FLRSxXQUFXLENBQUVDLG9CQUxmLENBTUUsWUFBWSxDQUFFQyxxQkFOaEIsQ0FPRSxZQUFZLENBQUVDLHFCQVBoQiw4RUFTRSxvQkFBQyxnQkFBRCw2QkFBc0JDLFVBQXRCLGdGQVRGLENBREYsQ0FhRCxDQXhCRCxDLGFBMEJlUCxZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcclxuaW1wb3J0IHtcclxuICBQbGF0Zm9ybSxcclxuICBTdHlsZVNoZWV0LFxyXG4gIFRleHQsXHJcbiAgVGV4dFN0eWxlLFxyXG4gIFRvdWNoYWJsZU9wYWNpdHksXHJcbiAgVG91Y2hhYmxlT3BhY2l0eVByb3BzLFxyXG59IGZyb20gXCJyZWFjdC1uYXRpdmVcIjtcclxuaW1wb3J0IFJORGF0ZVRpbWVQaWNrZXIsIHtcclxuICBFdmVudCxcclxufSBmcm9tIFwiQHJlYWN0LW5hdGl2ZS1jb21tdW5pdHkvZGF0ZXRpbWVwaWNrZXJcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XHJcblxyXG5pbXBvcnQgRm9ybUlucHV0Q29udGFpbmVyIGZyb20gXCIuL0Zvcm1JbnB1dENvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBUaGVtZUZvcm1EYXRlVGltZSB9IGZyb20gXCIuL3RoZW1lc1wiO1xyXG5pbXBvcnQge1xyXG4gIEJhc2VJbnB1dFByb3BzLFxyXG4gIEJhc2VJbnB1dFdJdGhDb250YWluZXJQcm9wcyxcclxuICBEZWZhdWx0SW5wdXRTdHlsZXMsXHJcbiAgR2VuZXJpY1N0eWxlLFxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IGNvbXBpbGVUZXh0U3R5bGVzLCBEaXNwbGF5TmFtZVByZWZpeCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5jb25zdCBEZWZhdWx0RGF0ZUZvcm1hdCA9IFwiTU1NIERELCBZWVlZXCI7XHJcbmNvbnN0IERlZmF1bHREYXRlVGltZUZvcm1hdCA9IFwiTU1NIERELCBZWVlZIGhoOm1tIEFcIjtcclxuXHJcbnR5cGUgT21pdHRlZEZvcm1EYXRlVGltZVBpY2tlciA9IE9taXQ8XHJcbiAgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFJORGF0ZVRpbWVQaWNrZXI+LFxyXG4gIFwic3R5bGVcIiB8IFwidmFsdWVcIiB8IFwib25DaGFuZ2VcIiB8IFwiZGlzcGxheVwiXHJcbj47XHJcblxyXG50eXBlIE9taXR0ZWRGb3JtRGF0ZVRpbWVQcm9wcyA9IE9taXQ8XHJcbiAgQmFzZUlucHV0V0l0aENvbnRhaW5lclByb3BzLFxyXG4gIFwiRm9jdXNhYmxlSW5wdXRDb250YWluZXJTdHlsZXNcIiB8IFwiRm9jdXNhYmxlSW5wdXRTdHlsZXNcIlxyXG4+O1xyXG5cclxuZXhwb3J0IHR5cGUgRm9ybURhdGVUaW1lU3R5bGVzID0gR2VuZXJpY1N0eWxlPFRleHRTdHlsZSwgRGVmYXVsdElucHV0U3R5bGVzPjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUZvcm1EYXRlVGltZVByb3BzXHJcbiAgZXh0ZW5kcyBPbWl0dGVkRm9ybURhdGVUaW1lUGlja2VyLFxyXG4gICAgQmFzZUlucHV0UHJvcHMsXHJcbiAgICBQYXJ0aWFsPEZvcm1EYXRlVGltZVN0eWxlcz4ge1xyXG4gIGRpc3BsYXlGb3JtYXQ/OiBzdHJpbmc7XHJcbiAgbW9kZT86IFwiZGF0ZVwiIHwgXCJ0aW1lXCIgfCBcImRhdGV0aW1lXCIgfCBcImNvdW50ZG93blwiO1xyXG4gIHZhbHVlPzogRGF0ZSB8IG51bGw7XHJcbiAgb25DaGFuZ2U/OiAodmFsdWU6IERhdGUpID0+IGFueTtcclxuICBvbklucHV0UHJlc3M/OiBUb3VjaGFibGVPcGFjaXR5UHJvcHNbXCJvblByZXNzXCJdO1xyXG4gIGRpc3BsYXk/OiBcImRlZmF1bHRcIiB8IFwic3Bpbm5lclwiXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRm9ybURhdGVUaW1lUHJvcHNcclxuICBleHRlbmRzIE9taXR0ZWRGb3JtRGF0ZVRpbWVQcm9wcyxcclxuICAgIEJhc2VGb3JtRGF0ZVRpbWVQcm9wcyB7fVxyXG5cclxuZXhwb3J0IGNvbnN0IERhdGVUaW1lQmFzZUlucHV0RGVmYXVsdFByb3BzOiBGb3JtRGF0ZVRpbWVQcm9wcyA9IHtcclxuICBhbGxvd0RlZmF1bHRTdHlsZTogdHJ1ZSxcclxuICBwbGFjZWhvbGRlcjogXCJTZWxlY3QgZGF0ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb3BUeXBlcyA9IHtcclxuICAvKipcclxuICAgKiBGb3JtYXQgb2YgdGhlIGRhdGUgdG8gYmUgZGlzcGxheWVkICh1c2VzIGEgTW9tZW50SlMgRm9ybWF0KVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vbW9tZW50anMuY29tL2RvY3MvIy9kaXNwbGF5aW5nL1xyXG4gICAqL1xyXG4gIGRpc3BsYXlGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgLyoqXHJcbiAgICogVmFsdWVcclxuICAgKi9cclxuICB2YWx1ZTogUHJvcFR5cGVzLmluc3RhbmNlT2YoRGF0ZSksXHJcbiAgLyoqXHJcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiBzZWxlY3RlZCBhIG5ldyBkYXRlXHJcbiAgICovXHJcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxyXG4gIC8qKlxyXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gaW5wdXQgaXMgcHJlc3NlZFxyXG4gICAqL1xyXG4gIG9uSW5wdXRQcmVzczogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgQmFzZUZvcm1EYXRlVGltZTogUmVhY3QuRkM8Rm9ybURhdGVUaW1lUHJvcHM+ID0gKHtcclxuICBwbGFjZWhvbGRlcixcclxuICB2YWx1ZSxcclxuICBpbnZhbGlkLFxyXG4gIGFsbG93RGVmYXVsdFN0eWxlLFxyXG4gIGRpc3BsYXlGb3JtYXQsXHJcbiAgbW9kZSxcclxuICBzdHlsZSxcclxuICBmaWxsZWRTdHlsZSxcclxuICBpbnZhbGlkU3R5bGUsXHJcbiAgb25DaGFuZ2UsXHJcbiAgb25JbnB1dFByZXNzLFxyXG4gIGRpc3BsYXksXHJcbiAgLi4ub3RoZXJQcm9wc1xyXG59KSA9PiB7XHJcbiAgY29uc3QgW3Zpc2libGUsIHNldFZpc2libGVdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICBjb25zdCB2YWx1ZUZvcm1hdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKCEhZGlzcGxheUZvcm1hdCkge1xyXG4gICAgICByZXR1cm4gZGlzcGxheUZvcm1hdDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbW9kZSA9PT0gXCJkYXRlXCIgPyBEZWZhdWx0RGF0ZUZvcm1hdCA6IERlZmF1bHREYXRlVGltZUZvcm1hdDtcclxuICB9LCBbZGlzcGxheUZvcm1hdCwgbW9kZV0pO1xyXG5cclxuICBjb25zdCBjb21waWxlU3R5bGUgPSBSZWFjdC51c2VNZW1vKFxyXG4gICAgKCkgPT4gY29tcGlsZVRleHRTdHlsZXMoVGhlbWVGb3JtRGF0ZVRpbWUuc3R5bGUsIHN0eWxlLCBhbGxvd0RlZmF1bHRTdHlsZSksXHJcbiAgICBbYWxsb3dEZWZhdWx0U3R5bGUsIHN0eWxlLCBUaGVtZUZvcm1EYXRlVGltZS5zdHlsZV1cclxuICApO1xyXG5cclxuICBjb25zdCBjb21waWxlZEZpbGxlZFN0eWxlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb21waWxlVGV4dFN0eWxlcyhcclxuICAgICAgVGhlbWVGb3JtRGF0ZVRpbWUuZmlsbGVkU3R5bGUsXHJcbiAgICAgIGZpbGxlZFN0eWxlLFxyXG4gICAgICBhbGxvd0RlZmF1bHRTdHlsZVxyXG4gICAgKTtcclxuICB9LCBbYWxsb3dEZWZhdWx0U3R5bGUsIHZhbHVlLCBmaWxsZWRTdHlsZSwgVGhlbWVGb3JtRGF0ZVRpbWUuZmlsbGVkU3R5bGVdKTtcclxuXHJcbiAgY29uc3QgY29tcGlsZWRJbnZhbGlkU3R5bGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGlmICghaW52YWxpZCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29tcGlsZVRleHRTdHlsZXMoXHJcbiAgICAgIFRoZW1lRm9ybURhdGVUaW1lLmludmFsaWRTdHlsZSxcclxuICAgICAgaW52YWxpZFN0eWxlLFxyXG4gICAgICBhbGxvd0RlZmF1bHRTdHlsZVxyXG4gICAgKTtcclxuICB9LCBbXHJcbiAgICBhbGxvd0RlZmF1bHRTdHlsZSxcclxuICAgIGludmFsaWQsXHJcbiAgICBpbnZhbGlkU3R5bGUsXHJcbiAgICBUaGVtZUZvcm1EYXRlVGltZS5pbnZhbGlkU3R5bGUsXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChfOiBFdmVudCwgc2VsZWN0ZWREYXRlOiBEYXRlKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHNlbGVjdGVkRGF0ZSB8fCB2YWx1ZTtcclxuICAgIHNldFZpc2libGUoUGxhdGZvcm0uT1MgPT09IFwiaW9zXCIpO1xyXG4gICAgcmV0dXJuIG9uQ2hhbmdlICYmIG9uQ2hhbmdlKGN1cnJlbnREYXRlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVQcmVzczogVG91Y2hhYmxlT3BhY2l0eVByb3BzW1wib25QcmVzc1wiXSA9IChldmVudCkgPT4ge1xyXG4gICAgc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIG9uSW5wdXRQcmVzcyAmJiBvbklucHV0UHJlc3MoZXZlbnQpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNvbXBpbGVkU3R5bGVzID0gU3R5bGVTaGVldC5mbGF0dGVuKFtcclxuICAgIGNvbXBpbGVTdHlsZSxcclxuICAgIGNvbXBpbGVkRmlsbGVkU3R5bGUsXHJcbiAgICBjb21waWxlZEludmFsaWRTdHlsZSxcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e2hhbmRsZVByZXNzfT5cclxuICAgICAgICA8VGV4dCBzdHlsZT17Y29tcGlsZWRTdHlsZXN9PlxyXG4gICAgICAgICAgeyEhdmFsdWUgPyBtb21lbnQodmFsdWUpLmZvcm1hdCh2YWx1ZUZvcm1hdCkgOiBwbGFjZWhvbGRlcn1cclxuICAgICAgICA8L1RleHQ+XHJcbiAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cclxuICAgICAge3Zpc2libGUgJiYgKFxyXG4gICAgICAgIDxSTkRhdGVUaW1lUGlja2VyXHJcbiAgICAgICAgICB7Li4ub3RoZXJQcm9wc31cclxuICAgICAgICAgIGRpc3BsYXk9e2Rpc3BsYXl9XHJcbiAgICAgICAgICB2YWx1ZT17dmFsdWUgfHwgbmV3IERhdGUoKX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2UgYXMgYW55fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8Lz5cclxuICApO1xyXG59O1xyXG5cclxuQmFzZUZvcm1EYXRlVGltZS5kaXNwbGF5TmFtZSA9IGAke0Rpc3BsYXlOYW1lUHJlZml4fUJhc2VGb3JtRGF0ZVRpbWVgO1xyXG5CYXNlRm9ybURhdGVUaW1lLnByb3BUeXBlcyA9IHByb3BUeXBlcztcclxuXHJcbmNvbnN0IEZvcm1EYXRlVGltZTogUmVhY3QuRkM8XHJcbiAgRm9ybURhdGVUaW1lUHJvcHMgJiBCYXNlSW5wdXRXSXRoQ29udGFpbmVyUHJvcHNcclxuPiA9ICh7XHJcbiAgbGVmdENvbXBvbmVudCxcclxuICByaWdodENvbXBvbmVudCxcclxuICBjb250YWluZXJTdHlsZSxcclxuICBmaWxsZWRDb250YWluZXJTdHlsZSxcclxuICBmb2N1c2VkQ29udGFpbmVyU3R5bGUsXHJcbiAgaW52YWxpZENvbnRhaW5lclN0eWxlLFxyXG4gIC4uLmlucHV0UHJvcHNcclxufSkgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8Rm9ybUlucHV0Q29udGFpbmVyXHJcbiAgICAgIGZpbGxlZD17ISFpbnB1dFByb3BzLnZhbHVlfVxyXG4gICAgICBpbnZhbGlkPXshIWlucHV0UHJvcHMuaW52YWxpZH1cclxuICAgICAgYWxsb3dEZWZhdWx0U3R5bGU9e2lucHV0UHJvcHMuYWxsb3dEZWZhdWx0U3R5bGV9XHJcbiAgICAgIHN0eWxlPXtjb250YWluZXJTdHlsZX1cclxuICAgICAgZmlsbGVkU3R5bGU9e2ZpbGxlZENvbnRhaW5lclN0eWxlfVxyXG4gICAgICBmb2N1c2VkU3R5bGU9e2ZvY3VzZWRDb250YWluZXJTdHlsZX1cclxuICAgICAgaW52YWxpZFN0eWxlPXtpbnZhbGlkQ29udGFpbmVyU3R5bGV9XHJcbiAgICA+XHJcbiAgICAgIDxCYXNlRm9ybURhdGVUaW1lIHsuLi5pbnB1dFByb3BzfSAvPlxyXG4gICAgPC9Gb3JtSW5wdXRDb250YWluZXI+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1EYXRlVGltZTtcclxuIl19